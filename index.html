<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Haocong Cheng's SPR2019-ADV Project</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/white.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

    <link href="https://fonts.googleapis.com/css?family=Questrial" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/head.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vega"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed"></script>

    <link rel="stylesheet/less" type="text/css" href="styles.less" />

</head>

<body>

    <div id="vis2"></div>

    <!-- This is from the example embedded vega-lite demo -->
    <script type="text/javascript">
        var vlSpec =
        {
            "$schema": "https://vega.github.io/schema/vega-lite/v3.0.json",
            "data": {
                "url": "https://raw.githubusercontent.com/F1Mider/spr2019-adv-project/master/rides.csv"
            },
            "hconcat": [
                {
                    "layer": [
                        {
                            "data": {
                                "url": "https://raw.githubusercontent.com/F1Mider/spr2019-adv-project/master/N02-17_GML/N02-17_RailroadSection.geojson",
                                "format": { "property": "features" }
                            },
                            "mark": "geoshape",
                            "encoding": { "color": { "value": "gray" } }
                        },
                        {
                            "selection": {
                                "station_choice": {
                                    "fields": ["station_name_x"],
                                    "type": "single",
                                    "empty": "none"
                                },
                                "station_choice_a": {
                                    "fields": ["station_name_x"],
                                    "type": "single"
                                }
                            },
                            "transform": [{ "filter": { "selection": "station_choice" } }],
                            "mark": { "type": "circle", "size": 12 },
                            "encoding": {
                                "longitude": { "field": "lon_y", "type": "quantitative" },
                                "latitude": { "field": "lat_y", "type": "quantitative" },
                                "tooltip": [{ "field": "station_name_y", "type": "nominal" }],
                                "color": { "value": "red" }
                            },
                            "width": 800,
                            "height": 900
                        },
                        {
                            "transform": [{ "filter": { "selection": "station_choice_a" } }],
                            "mark": { "type": "circle", "size": 8 },
                            "encoding": {
                                "longitude": { "field": "lon_x", "type": "quantitative" },
                                "latitude": { "field": "lat_x", "type": "quantitative" },
                                "tooltip": [{ "field": "station_name_x", "type": "nominal" }]
                            },
                            "width": 800,
                            "height": 900
                        }
                    ]
                },
                {
                    "vconcat": [
                        {
                            "mark": "bar",
                            "transform": [{ "filter": { "selection": "station_choice" } }],
                            "encoding": {
                                "x": { "bin": true, "field": "distance", "type": "quantitative" },
                                "y": { "aggregate": "count", "type": "quantitative" }
                            }
                        },
                        {
                            "mark": "bar",
                            "transform": [{ "filter": { "selection": "station_choice" } }],
                            "encoding": {
                                "y": { "field": "type", "type": "nominal" },
                                "x": { "aggregate": "count", "type": "quantitative" }
                            }
                        },
                        {
                            "mark": "bar",
                            "transform": [{ "filter": { "selection": "station_choice" } }],
                            "encoding": {
                                "y": {
                                    "field": "seat",
                                    "type": "nominal",
                                    "sort": { "encoding": "x", "order": "descending" }
                                },
                                "x": { "aggregate": "count", "type": "quantitative" }
                            }
                        },
                        {
                            "mark": "bar",
                            "transform": [{ "filter": { "selection": "station_choice" } }],
                            "encoding": {
                                "y": { "field": "service", "type": "nominal" },
                                "x": { "aggregate": "count", "type": "quantitative" }
                            }
                        }
                    ]
                }
            ],
            "config": {}
        }
        var embedded = vegaEmbed('#vis2', vlSpec);
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js"></script>
</body>

</html>